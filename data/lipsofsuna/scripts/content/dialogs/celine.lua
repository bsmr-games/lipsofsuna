Dialogspec{name = "celine", unique = true,
	{"branch", cond_dead = true,
		{"loot"}},
	{"branch", cond = "peculiar pet completed",
		{"say", "Celine", "I hope that Puppy is coming home soon."},
		{"exit"}},
	{"branch", cond = "puppy dead",
		{"say", "Celine", "What have you done? You... my poor little Puppy..."},
		{"say", "Celine", "But, this... what is this? Why a worm? Why?"},
		{"choice", "That isn't your pet.",
			{"say", "Celine", "Then where is Puppy?"},
			{"choice", "In the belly of the worm.",
				{"choice", "It can't be! No! Puppy... dead. My last friend... dead."},
				{"info", "Celine wields a knife and stabs herself."},
				{"choice", "Puppy..."},
				{"quest", "Peculiar Pet", status = "completed", text = "Celine has fallen into despair after realizing the tragic demise of her pet and has ended her life."},
				{"flag", "peculiar pet completed"},
				{"flag", "celine dead"},
				{"func", function(q) q.object:die() end},
				{"exit"}},
			{"choice", "She was chased away by the worm.",
				{"say", "Celine", "I'm so happy that it's again safe for Puppy to return."},
				{"say", "Celine", "I'll teach you this feat in return for killing the worm."},
				{"feat"},
				{"say", "Celine", "I'll wait for Puppy to return, no matter how long it takes."},
				{"quest", "Peculiar Pet", status = "completed", text = "Celine was convinced that Puppy is still alive. She's waiting for the pet to return back home."},
				{"flag", "peculiar pet completed"},
				{"exit"}}},
		{"choice", "I wanted to make you suffer.",
			{"say", "Celine", "I don't know why or how you did this but I will never forgive you!"},
			{"quest", "Peculiar Pet", status = "active", text = "We have angered Celine by telling that we killed her pet and turned the corpse into a dead bloodworm to offend her."},
			{"func", function(q)
				q.object.spec.ai_enable_combat = true
				q.object.spec:set_factions{"evil"} end},
			{"exit"}},
		{"choice", "Goodbye.",
			{"exit"}}},
	{"branch",
		{"choice", "What is that bloodworm doing here?",
			{"say", "Celine", "Bloodworm? If that was supposed to be a joke, it wasn't funny."},
			{"branch", cond_not = "known puppy",
				{"quest", "Peculiar Pet", status = "active", marker = "celine", text = "Celine has called us crazy because we told her that her pet, Puppy, is a bloodworm."},
				{"flag", "puppy known"}},
			{"say", "Celine", "Why does everyone keep calling my poor Puppy a worm?"},
			{"choice", "Because it's a bloodworm, no matter how you look at it.",
				{"say", "Celine", "You're crazy! Seeing things, I tell you. Get away from me!"},
				{"exit"}},
			{"choice", "Sorry, I didn't mean to offend you.",
				{"say", "Celine", "I hope you have better luck as an adventurer than as a comedian."}},
			{"choice", "Goodbye",
				{"exit"}}},
		{"choice", "Could you tell me about your pet?", cond = "puppy known",
			{"say", "Celine", "She's such a sweet little furball. Puppy wouldn't harm a fly."},
			{"say", "Celine", "Lately, she's been a little..."},
			{"info", "Celine pauses for a moment"},
			{"say", "Celine", "I'd never forgive myself if she came into harm's way."}},
		{"choice", "Goodbye.",
			{"exit"}}},
		{"loop"}}

Dialogspec{name = "celine death", unique = true,
	{"branch", cond_not = "peculiar pet completed",
		{"quest", "Peculiar Pet", status = "completed", marker = "celine", text = "Celine has been killed."},
		{"flag", "celine dead"},
		{"flag", "peculiar pet completed"}}}
